---
- hosts: localhost
  connection: local
  ignore_errors: yes
  
  tasks:
  - name: install iTerm2
    package: 
      name: iTerm2

  - name: install spectacle
    package: 
      name: spectacle

  - name: install karabiner
    package:
      name: karabiner-elements

  - name: install hammerspoon
    package:
      name: hammerspoon

  - name: install alfred
    package:
      name: alfred

  - name: install nodejs
    package:
      name: node

  - name: install emacs 
    shell: brew install emacs --cask

  - name: install packages for doom
    package:
      name: 
        - ripgrep 
        - coreutils 
        - fd

  - name: Check if DOOM is installed
    stat:
      path: ~/.emacs.d/bin/doom
    register: stat_result

  - name: Install DOOM
    shell: | 
      git clone https://github.com/hlissner/doom-emacs ~/.emacs.d
      ~/.emacs.d/bin/doom install -y
    when: not stat_result.stat.exists

  - name: Check if powerline-fonts are installed
    stat:
      path: /Users/witold/Library/Fonts/ProFont For Powerline.ttf
    register: font_result

  - name: install powerline-fonts
    script: powerline-fonts.sh
    when: not font_result.stat.exists
